{"version":3,"sources":["webpack:///./src/components/Toast.vue","webpack:///./src/components/Toast.vue?bff3","webpack:///./src/views/login/Login.vue?c83e","webpack:///./src/components/Toast.vue?39ae","webpack:///./src/views/login/Login.vue","webpack:///./src/views/login/Login.vue?a178"],"names":["class","message","name","props","toastData","show","toastMessage","showToast","setTimeout","__exports__","render","src","alt","type","placeholder","username","password","handleLogin","handleRegisterClick","router","data","result","errno","console","log","localStorage","isLogin","push","components","Toast","setup"],"mappings":"wOACOA,MAAM,S,wEAAX,eAAsC,MAAtC,EAAsC,eAAhB,EAAAC,SAAO,MAMf,GACdC,KAAK,GAELC,MAAO,CAACF,QAAU,KAGN,EAAiB,WAC9B,IAAMG,EAAY,eAAS,CAC1BC,MAAM,EACNC,aAAc,KAETC,EAAY,SAAAN,GAChBG,EAAUC,MAAO,EACjBD,EAAUE,aAAeL,EACzBO,YAAW,WACVJ,EAAUC,MAAO,EACjBD,EAAUE,aAAe,KACvB,MAX+B,EAaL,eAAOF,GAA9BC,EAb4B,EAa5BA,KAAMC,EAbsB,EAatBA,aACd,MAAO,CAAEC,YAAWF,OAAMC,iB,iCCpB3B,MAAMG,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,U,oCCTf,W,oCCAA,W,6JCCOV,MAAM,W,EACT,eAIE,OAHAW,IAAI,8CACJC,IAAI,GACJZ,MAAM,gB,YAEHA,MAAM,kB,GAQNA,MAAM,kB,sGAdb,eA0BM,MA1BN,EA0BM,CAzBJ,EAKA,eAOM,MAPN,EAOM,C,eANJ,eAKE,SAJAa,KAAK,OACLb,MAAM,0BACNc,YAAY,S,qDACH,EAAAC,SAAQ,K,mBAAR,EAAAA,cAGb,eAQM,MARN,EAQM,C,eAPJ,eAKE,SAJAF,KAAK,WACLb,MAAM,0BACNc,YAAY,Q,qDACH,EAAAE,SAAQ,K,mBAAR,EAAAA,cAIb,eAAgE,OAA3DhB,MAAM,wBAAyB,QAAK,8BAAE,EAAAiB,aAAA,EAAAA,YAAA,sBAAa,MACxD,eAAwE,OAAnEjB,MAAM,sBAAuB,QAAK,8BAAE,EAAAkB,qBAAA,EAAAA,oBAAA,sBAAqB,QACjD,EAAAb,M,iBAAb,eAA6C,G,MAAzBJ,QAAS,EAAAK,c,4GAU3B,EAAiB,SAACC,GACtB,IAAMY,EAAS,iBACXC,EAAO,eAAS,CAClBL,SAAU,GACVC,SAAU,KAENC,EAAU,yDAAI,6HAEK,eAAK,kBAAmB,CAC3CF,SAAUK,EAAKL,SACfC,SAAUI,EAAKJ,WAJD,OAEVK,EAFU,OAMM,KAAZ,OAANA,QAAM,IAANA,OAAA,EAAAA,EAAQC,QACVC,QAAQC,IAAIH,GACZI,aAAaC,SAAU,EACvBP,EAAOQ,KAAK,CAAEzB,KAAM,UAEpBK,EAAU,QAXI,mDAehBA,EAAU,QAfM,yDAAJ,qDANoB,EAwBL,eAAOa,GAA9BL,EAxB4B,EAwB5BA,SAAUC,EAxBkB,EAwBlBA,SAClB,MAAO,CAAED,WAAUC,WAAUC,gBAGzB,EAAoB,WACxB,IAAME,EAAS,iBACTD,EAAsB,WAC1BC,EAAOQ,KAAK,CAAEzB,KAAM,cAEtB,MAAO,CAAEgB,wBAGI,GACbhB,KAAM,QACN0B,WAAY,CACVC,QAAA,MAGFC,MANa,WAML,MACoC,iBAAlCvB,EADF,EACEA,UAAWF,EADb,EACaA,KAAMC,EADnB,EACmBA,aADnB,EAEsC,EAAeC,GAAnDQ,EAFF,EAEEA,SAAUC,EAFZ,EAEYA,SAAUC,EAFtB,EAEsBA,YAFtB,EAG0B,IAAxBC,EAHF,EAGEA,oBACR,MAAO,CACLD,cACAC,sBACAH,WACAC,WACAX,OACAC,kB,iCCjFN,MAAMG,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,gB","file":"js/login.d047ebde.js","sourcesContent":["<template>\n  <div class=\"toast\">{{ message }}</div>\n</template>\n\n<script>\nimport { reactive, toRefs } from 'vue'\n\n\texport default {\n\t\tname:'',\n\t\t// props: ['message']\n\t\tprops: {message : {}}\t\n\t}\n\n\texport const useToastEffect = () => {\n\tconst toastData = reactive({\n\t\tshow: false,\n\t\ttoastMessage: ''\n\t})\n\tconst showToast = message => {\n\t\t\ttoastData.show = true;\n\t\t\ttoastData.toastMessage = message;\n\t\t\tsetTimeout(() => {\n\t\t\t\ttoastData.show = false;\n\t\t\t\ttoastData.toastMessage = ''\n\t\t\t}, 2000)\n\t\t}\n\tconst { show, toastMessage } = toRefs(toastData)\t\n\treturn { showToast, show, toastMessage }\n}\n\n</script>\n\n<style lang='scss' scoped>\n.toast {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: rgba(0, 0, 0, 0.35);\n  padding: 0.1rem;\n  border-radius: 0.05rem;\n  color: #fff;\n}\n</style>","import { render } from \"./Toast.vue?vue&type=template&id=2924b2fa&scoped=true\"\nimport script from \"./Toast.vue?vue&type=script&lang=js\"\nexport * from \"./Toast.vue?vue&type=script&lang=js\"\n\nimport \"./Toast.vue?vue&type=style&index=0&id=2924b2fa&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/mac/xsdaojia/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2924b2fa\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Login.vue?vue&type=style&index=0&id=6f8b3ef0&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Toast.vue?vue&type=style&index=0&id=2924b2fa&lang=scss&scoped=true\"","<template>\n  <div class=\"wrapper\">\n    <img\n      src=\"https://www.dell-lee.com/imgs/vue3/user.png\"\n      alt=\"\"\n      class=\"wrapper__img\"\n    />\n    <div class=\"wrapper__input\">\n      <input\n        type=\"text\"\n        class=\"wrapper__input__content\"\n        placeholder=\"请输入用户名\"\n        v-model=\"username\"\n      />\n    </div>\n    <div class=\"wrapper__input\">\n      <input\n        type=\"password\"\n        class=\"wrapper__input__content\"\n        placeholder=\"请输入密码\"\n        v-model=\"password\"\n      />\n      <!-- autocomplete=\"new-password\" 写入上面解决密码自动填充-->\n    </div>\n    <div class=\"wrapper__login-button\" @click=\"handleLogin\">登陆</div>\n    <div class=\"wrapper__login-link\" @click=\"handleRegisterClick\">立即注册</div>\n    <Toast v-if=\"show\" :message=\"toastMessage\" />\n  </div>\n</template>\n\n<script>\nimport { useRouter } from \"vue-router\";\nimport { post } from \"../../utils/request\";\nimport { reactive, toRefs } from \"vue\";\nimport Toast, { useToastEffect } from \"../../components/Toast\";\n\nconst useLoginEffect = (showToast) => {\n  const router = useRouter();\n  let data = reactive({\n    username: \"\",\n    password: \"\",\n  });\n  const handleLogin = async () => {\n    try {\n      const result = await post(\"/api/user/login\", {\n        username: data.username,\n        password: data.password,\n      });\n      if (result?.errno === 0) {\n        console.log(result)\n        localStorage.isLogin = true;\n        router.push({ name: \"Home\" });\n      } else {\n        showToast(\"登录失败\");\n      }\n      // console.log(a); 有此行会进入catch\n    } catch (e) {\n      showToast(\"请求失败\");\n    }\n  };\n  const { username, password } = toRefs(data);\n  return { username, password, handleLogin };\n};\n\nconst useRegisterEffect = () => {\n  const router = useRouter();\n  const handleRegisterClick = () => {\n    router.push({ name: \"Register\" });\n  };\n  return { handleRegisterClick };\n};\n\nexport default {\n  name: \"Login\",\n  components: {\n    Toast,\n  },\n  \n  setup() {\n    const { showToast, show, toastMessage } = useToastEffect();\n    const { username, password, handleLogin } = useLoginEffect(showToast);\n    const { handleRegisterClick } = useRegisterEffect();\n    return {\n      handleLogin,\n      handleRegisterClick,\n      username,\n      password,\n      show,\n      toastMessage,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../style/viriables.scss\";\n.wrapper {\n  position: absolute;\n  top: 50%;\n  left: 0;\n  right: 0;\n  transform: translateY(-50%);\n  &__img {\n    display: block;\n    margin: 0 auto 0.4rem auto;\n    width: 0.66rem;\n    height: 0.66rem;\n  }\n  &__input {\n    height: 0.48rem;\n    margin: 0 0.4rem 0.16rem 0.4rem;\n    padding: 0 0.16rem;\n    background: #f9f9f9;\n    border: 1px solid rgba(0, 0, 0, 0.1);\n    border-radius: 6px;\n    border-radius: 6px;\n    &__content {\n      // 去除input自带边框\n      border: none;\n      // 去除光标选中时边框\n      outline: none;\n      line-height: 0.43rem;\n      width: 100%;\n      background: none;\n      color: rgba(0, 0, 0, 0.5);\n      font-size: 0.16rem;\n      &::placeholder {\n        color: rgba(0, 0, 0, 0.5);\n      }\n    }\n  }\n  &__login-button {\n    margin: 0.32rem 0.4rem 0.16rem;\n    line-height: 0.48rem;\n    background: #0091ff;\n    box-shadow: 0 0.04rem 0.08rem 0 rgba(0, 145, 255, 0.32);\n    border-radius: 0.04rem;\n    border-radius: 0.04rem;\n    color: $bgColor;\n    font-size: 0.16rem;\n    text-align: center;\n  }\n  &__login-link {\n    text-align: center;\n    font-size: 0.14rem;\n    color: $content-notice-fontcolor;\n  }\n}\n</style>\n\n","import { render } from \"./Login.vue?vue&type=template&id=6f8b3ef0&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=6f8b3ef0&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/mac/xsdaojia/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6f8b3ef0\"]])\n\nexport default __exports__"],"sourceRoot":""}